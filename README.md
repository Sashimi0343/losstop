# README
[![Image from Gyazo](https://i.gyazo.com/6baed41d75c27efbde7009ef88e111ac.png)](https://gyazo.com/6baed41d75c27efbde7009ef88e111ac)
<br><br>

# アプリケーション名
## LosStop
<br><br>


# 本番環境
http://35.76.23.73/<br>
BASIC認証<br>
ID：admin<br>
Pass：0343<br>
<br>

テスト用アカウント<br>
・販売企業<br>
　Email：company1@test<br>
　Pass：company1<br>
<br>

・一般顧客<br>
　Email：customer1@test<br>
　Pass：customer1<br>
<br><br>

# 概要
食品に特化した、ユーザー主導の商品販売サイトです。<br>
一般的なオークション形式と、逆オークション形式の2つがあります。<br><br>
企業・店舗側は食品を出品、または販売提案することが出来ます。<br>
一般ユーザーは企業・店舗が出品した食品を購入、または買いたい物を言語化し、投稿することが出来ます。<br><br>
食品を扱う企業や個人店が、なんらかの事情により抱えてしまった過剰在庫を販売し、経営の助けとすることを目的にしています。<br>
クラウドファンディング等を利用せずとも、在庫を処理する機会を得られるのが魅力です。<br><br><br>


# ターゲット
販売側：食品メーカー・結婚式場・イベント施設運営企業・飲食店など<br>
購入側：一般顧客<br><br><br>

## こういった方々におすすめ
[![Image from Gyazo](https://i.gyazo.com/f39e537006a7af4e2c55cfc721967819.png)](https://gyazo.com/f39e537006a7af4e2c55cfc721967819)
[![Image from Gyazo](https://i.gyazo.com/53a661b6a20875ae33beef90fc45547a.png)](https://gyazo.com/53a661b6a20875ae33beef90fc45547a)
<br><br>


# 開発の経緯-日本の為、ひいては世界の為に。
世界では食品の約1/3が食べられることなく廃棄されていると言われている。<br>
また、学生時代からアルバイトを通じて食品の廃棄問題には大変心を痛めていた。<br>
<br>
昨今の日本では従来に加え、コロナウィルスの蔓延により<br>
飲食店の休業やイベントの中止。<br>
はたまた、結婚披露宴の中止などが全国的に起こっている。<br>
<br>
この影響により、多くの食品が廃棄される事になると共に<br>
また、それらを経営する企業・個人店に甚大な被害を及ぼしている。<br>
<br>
一部、クラウドファンディングやSNSを活用し<br>
大量に抱えた在庫の販売先を求める企業も存在するが<br>
難易度と、在庫数が必要なこともあり決して多くはない。<br>
<br>
わたしは、そんな日本や世界の状況を知り<br>
食べられる事なく廃棄されていった食品達の無念<br>
ひいてはそれに関連する経営者達が直面している問題に対して<br>
少しでも助けになることは出来ないか？と考え<br>
このアプリケーションの開発に至った。<br>
<br><br>
"食べ物"　が　"食べ物"として消費されることで
<br>世界の貧困問題は劇的に改善されると、わたしは信じている。
<br><br>


# 使い方<br>

## 企業・一般　共通
まずは会員登録を行う。<br>
企業・店舗<br>
[![Image from Gyazo](https://i.gyazo.com/44ea3bdd2a2851b01c27e4287b03a267.gif)](https://gyazo.com/44ea3bdd2a2851b01c27e4287b03a267)
<br><br>
一般ユーザー<br>
[![Image from Gyazo](https://i.gyazo.com/32b1d28ca7d69057cc60731c0bdc7932.gif)](https://gyazo.com/32b1d28ca7d69057cc60731c0bdc7932)
<br><br><br><br>


# バザー
## 全体の流れ
[![Image from Gyazo](https://i.gyazo.com/e2deb8e4e5ece1fd9c5962c1b12a5677.png)](https://gyazo.com/e2deb8e4e5ece1fd9c5962c1b12a5677)
<br><br><br>

## STEP1-出品（企業・店舗）
企業・店舗は販売したい商品を出品できる。<br>
出品した物はマイページから確認できる。<br>
[![Image from Gyazo](https://i.gyazo.com/5096095fd45af396e417e7d4feeaa305.gif)](https://gyazo.com/5096095fd45af396e417e7d4feeaa305)
<br><br><br>

## STEP2-購入を希望する（一般ユーザー）
一般ユーザーは気に入った商品に購入希望を出せる。<br>
この時点では、まだ取引は成立していない。<br>
[![Image from Gyazo](https://i.gyazo.com/f7f02b61c1f8a448700b8428f8d18a64.gif)](https://gyazo.com/f7f02b61c1f8a448700b8428f8d18a64)
<br><br><br>

## STEP3・4-専用の部屋で支払いや配送についての連絡を取る
こちらは会社から見た場合<br>
商品ページ・マイページどちらからでもアクセスできる。<br>
[![Image from Gyazo](https://i.gyazo.com/a458ca4d5adf657361230309bdf5c853.gif)](https://gyazo.com/a458ca4d5adf657361230309bdf5c853)
<br><br><br>

こちらが、一般ユーザーから見た場合。<br>
[![Image from Gyazo](https://i.gyazo.com/bac2f52d05dbd8e0dae29d640da34767.gif)](https://gyazo.com/bac2f52d05dbd8e0dae29d640da34767)
<br><br><br><br>


# 逆オークション
## 全体の流れ
[![Image from Gyazo](https://i.gyazo.com/1ae1828659b95470775ecbce63aff6aa.png)](https://gyazo.com/1ae1828659b95470775ecbce63aff6aa)
<br><br><br>


## STEP1-欲しいモノのイメージを投稿する（一般ユーザー）
どういったモノが、どんな用途で欲しいか？<br>
大まかなイメージを投稿する。<br>
[![Image from Gyazo](https://i.gyazo.com/a4969113e52cd087618ba2c14adb0df5.gif)](https://gyazo.com/a4969113e52cd087618ba2c14adb0df5)
<br><br><br>


## STEP2・3-条件に合う投稿を探し、商品PR・提案を行う（企業・お店）
複数の企業・お店が1つのユーザー投稿に対してPR・提案が出来る。<br>
[![Image from Gyazo](https://i.gyazo.com/cfd93e39c366a2294be57cb887435596.gif)](https://gyazo.com/cfd93e39c366a2294be57cb887435596)
<br><br><br>


## STEP4-気に入った物に返信する（一般ユーザー）
商品PR・提案の企業投稿がそのまま専用の連絡部屋になる。<br>
投稿ページ・マイページどちらからでもアクセスできる。<br>
使い方はバザーと同じ。<br>
[![Image from Gyazo](https://i.gyazo.com/9d1b805fa9229ec1845bed246a0ecd96.gif)](https://gyazo.com/9d1b805fa9229ec1845bed246a0ecd96)
<br><br><br>


## STEP5・6-支払いや配送についての連絡を取る（企業・お店）
投稿ページ・マイページどちらからでもアクセスできる。<br>
使い方はバザーと同じ。<br>
[![Image from Gyazo](https://i.gyazo.com/b44debde894216b858460f272894ca55.gif)](https://gyazo.com/b44debde894216b858460f272894ca55)
<br><br><br><br>


# 工夫したポイント
特にUIの分かり易さに注力しました。<br>
全国津々浦々の個人店も利用する事を想定しているため<br>
老若男女問わず「見易くて・分かり易いサイト」を目指しました。<br>
<br>
特に食品情報ページの登録・回覧をほぼ同じにすることで<br>
販売者が直感的に入力・出品を出来るよう努めました。<br>
<br><br>


# 開発環境
## バックエンド
Ruby, Ruby on Rails
<br><br>

## フロントエンド
HTML/Sass, JavaScript
<br><br>

## データベース
MySQL, SequelPro
<br><br>

## インフラ
AWS(EC2), Capistrano, Docker(開発環境)
<br><br>

## Webサーバ
nginx
<br><br>

## アプリケーションサーバ
unicorn
<br><br>

## ソース管理
GitHub, GitHubDesktop
<br><br>

## テスト
RSpec
<br><br>

## エディタ
VSCode
<br><br><br><br>


# 今後実装したい機能
・お知らせ機能<br>
　⇨ユーザーの利便性向上のため
<br><br>


# DB設計
### ↓----------共通で使用するテーブル----------↓

## companiesテーブル

| Column             | Type    | Options                   |
| ------------------ | ------- | ------------------------- |
| name               | string  | null: false               |
| email              | string  | null: false, unique: true |
| encrypted_password | string  | null: false               |
| president          | string  | null: false               |
| profile            | text    | null: false               |
| phone              | string  | null: false               |
| prefecture_id      | integer | null: false               |
| city               | string  | null: false               |
| address            | string  | null: false               |
| homepage           | text    |                           |
#### imageはActiveStorageを使用するため未記載

### Association：バザー
- has_many :bazaars
- has_many :order_bazaars
- has_many :review_bazaars
- has_many :contact_bazaars


### Association：逆オークション
- has_many :order_auctions
- has_many :review_auctions
- has_many :contact_auctions



<br><br>
## users テーブル

| Column             | Type   | Options                   |
| ------------------ | ------ | ------------------------- |
| name               | string | null: false               |
| profile            | text   |                           |
| email              | string | null: false, unique: true |
| encrypted_password | string | null: false               |
| first_name         | string | null: false               |
| last_name          | string | null: false               |
| first_name_kana    | string | null: false               |
| last_name_kana     | string | null: false               |
| birthday           | date   | null: false               |

### Association：バザー
- has_many :order_bazaars
- has_many :review_bazaars
- has_many :contact_bazaars


### Association：逆オークション
- has_many :auctions
- has_many :order_auctions
- has_many :contact_auctions


<br><br>
### ↓----------バザーでのみ使用するテーブル----------↓

## bazaars テーブル

| Column              | Type       | Options                        |
| ------------------- | ---------- | ------------------------------ |
| title               | string     | null: false                    |
| description         | text       | null: false                    |
| price               | integer    | null: false                    |
| stock               | integer    | null: false                    |
| deadline            | date       | null: false                    |
| active              | string     | null: false                    |
| category_id         | integer    | null: false                    |
| delivery_charge_id  | integer    | null: false                    |
| company             | references | null: false, foreign_key: true |
#### imageはActiveStorageを使用するため未記載

### Association
- has_many   :order_bazaars
- has_many   :review-bazaars
- belongs_to :company


<br><br>
## order_bazaars テーブル

| Column    | Type       | Options                        |
| --------- | ---------- | ------------------------------ |
| quantity  | integer    |                                |
| active    | string     | null: false                    |
| bazaar    | references | null: false, foreign_key: true |
| user      | references | null: false, foreign_key: true |

### Association
- has_one    :contact_bazaar
- belongs_to :bazaar
- belongs_to :company
- belongs_to :user


<br><br>
## contact_bazaars テーブル

| Column        | Type       | Options                        |
| ------------- | ---------- | ------------------------------ |
| name          | string     | null: false                    |
| message       | text       | null: false                    |
| order_bazaar  | references | null: false, foreign_key: true |
| company       | references | foreign_key: true              |
| user          | references | foreign_key: true              |

### Association
- belongs_to :order_bazaar
- belongs_to :company
- belongs_to :user


<br><br>
## review_bazaars テーブル

| Column    | Type       | Options                        |
| --------- | ---------- | ------------------------------ |
| name      | string     | null: false                    |
| comment   | text       | null: false                    |
| bazaar    | references | null: false, foreign_key: true |
| company   | references | null: false, foreign_key: true |
| user      | references | null: false, foreign_key: true |

### Association
- belongs_to :bazaar
- belongs_to :company
- belongs_to :user


<br><br>
### ↓------逆オークションでのみ使用するテーブル------↓
## auctions テーブル

| Column              | Type       | Options                        |
| ------------------- | ---------- | ------------------------------ |
| title               | string     | null: false                    |
| description         | text       | null: false                    |
| price               | integer    | null: false                    |
| active              | string     | null: false                    |
| category_id         | integer    | null: false                    |
| delivery_charge_id  | integer    | null: false                    |
| deadline            | date       | null: false                    |
| user                | references | null: false, foreign_key: true |
#### imageはActiveStorageを使用するため未記載

### Association
- has_many   :order_auctions
- belongs_to :user



<br><br>
## order_auctions テーブル

| Column       | Type       | Options                        |
| ------------ | ---------- | ------------------------------ |
| title        | string     |                                |
| description  | text       |                                |
| price        | integer    |                                |
| active       | string     | null: false                    |
| auction      | references | null: false, foreign_key: true |
| company      | references | null: false, foreign_key: true |
#### imageはActiveStorageを使用するため未記載

### Association
- has_one    :contact_auction
- belongs_to :auction
- belongs_to :company
- belongs_to :user



<br><br>
## contact_auctions テーブル

| Column         | Type       | Options                        |
| -------------- | ---------- | ------------------------------ |
| name           | string     | null: false                    |
| message        | text       | null: false                    |
| auction_order  | references | null: false, foreign_key: true |
| user           | references | null: false, foreign_key: true |
| company        | references | null: false, foreign_key: true |

### Association
- belongs_to :order_order
- belongs_to :user
- belongs_to :company
